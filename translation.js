const translations = {
  en: {
    "title": "Sravani H. Venkata - Machine Learning Engineer",
    "name": "Sravani H. Venkata",
    "tagline": "Machine Learning Engineer specialized in Automotive AI & Data Science",
    "email": "Email",
    "linkedin": "LinkedIn",
    "github": "GitHub",
    "phone": "+49 [Your Phone Number]",
    "location": "Germany (Willing to relocate)",
    
    "summary_title": "Summary",
    "summary_text": "High-impact Machine Learning Engineer with 11 years of automotive expertise and advanced Data Science training from Université Paris Panthéon-Sorbonne. Proven track record in developing AI-driven automation and real-time anomaly detection systems. Seeking a Senior ML role to integrate Generative AI with Embedded Systems.",
    "summary_text_short": "ML Engineer with 11 years of automotive expertise and advanced Data Science training from Université Paris Panthéon-Sorbonne. Expert in real-time anomaly detection and AI automation.",
    
    "skills_title": "Skills",
    "skills_cat_prog": "Programming Languages",
    "skills_prog_lang_details": "Python (Expert/OOP), SQL, C++, Java",
    "skills_cat_ml": "Data Science & Machine Learning",
    "skills_ml_details": "LLMs (LangChain, LlamaIndex), RAG Architecture, Computer Vision (OpenCV), Time Series, Anomaly Detection",
    "skills_cat_dl": "Deep Learning & Neural Networks",
    "skills_dl_details": "Keras, PyTorch, TensorFlow, CNNs, Transformers, Reinforcement Learning",
    "skills_cat_tools": "Tools & Platforms",
    "skills_tools_details": "Pandas, Scikit-learn, Git, Docker, Streamlit, AWS, Linux, Vector Databases (Pinecone/Milvus)",
    "skills_cat_other": "Embedded Systems",
    "skills_other_details": "AUTOSAR, Embedded C, IoT, Microcontrollers (ESP32/Arduino), RTOS, Hardware-Software Interfacing",
    "ds_libs_details": "Pandas, NumPy, Scikit-learn, Matplotlib, Seaborn, Plotly",
    
    "projects_title": "Projects",
    "project_1_title": "CAN Bus Anomaly Detection (AI Safety)",
    "project_tech_title": "Technologies",
    "project_1_tech": "Python, Keras, LSTM Autoencoder, Isolation Forest",
    "project_methods_title": "Methods & Techniques",
    "project_1_methods": "Unsupervised Learning, Feature Engineering, Real-time Analysis",
    "project_impact_title": "Impact",
    "project_1_impact": "Built an automated security system identifying vehicle cyber-attacks with 97.6% accuracy, ensuring passenger safety.",
    "project_1_desc": "Developed a robust AI system to detect malicious messages in vehicle communication networks (CAN bus) in real-time.",
    "project_1_li_1": "<b>Methodology:</b> Used advanced AI models to monitor vehicle data and flag suspicious activities automatically.",
    "project_1_li_2": "<b>Technical Edge:</b> Analyzed message frequency and content to distinguish between normal driving and cyber-attacks.",
    "project_1_li_3": "<b>Outcome:</b> Achieved a 98.8% precision rate in identifying Denial of Service (DoS) attacks.",
    "project_1_li_4": "Demonstrated the ability to bridge complex automotive hardware with modern AI security protocols.",
    
    "experience_title": "Professional Experience",
    "experience_title_print": "Professional Experience (11 Years Automotive & AI)",
    
    "exp_1_title": "Project Lead | Montbleu Technologies GmbH, Germany",
    "exp_1_date": "Aug 2021 – Feb 2025",
    "exp_1_li_1": "Led a team of engineers to adapt software for new vehicle platforms, improving deployment speed by 25%.",
    "exp_1_li_2": "Architected multicore support and high-speed communication (XCP over Ethernet) for Tier-1 OEMs.",
    "exp_1_li_3": "Managed project budgets and technical delivery for clients including Stellantis and Vector Informatik.",
    "exp_1_li_4": "Reduced system-level bugs by 20% through the implementation of automated watchdog monitoring.",
    
    "exp_2_title": "Lead Engineer | Avin Systems GmbH, Berlin",
    "exp_2_date": "Sep 2019 – July 2021",
    "exp_2_li_1": "Steered the Software Architecture for Mercedes-Benz Battery Management Systems (BMS).",
    "exp_2_li_2": "Ensured 100% compliance with automotive safety standards (AUTOSAR) across all software modules.",
    "exp_2_li_3": "Mentored a team of 5 junior engineers, resulting in a 30% increase in team coding efficiency.",
    
    "exp_3_title": "Senior Software Engineer | KPIT Technologies, Munich",
    "exp_3_date": "Oct 2013 – June 2019",
    "exp_3_li_1": "Developed core software for BMW, Continental, and ZF-TRW, focusing on vehicle communication.",
    "exp_3_li_2": "Optimized diagnostics protocols, reducing software flashing time by 15%.",
    "exp_3_li_3": "Collaborated with cross-functional hardware teams to integrate seamless software updates.",
    
    "tech_skills_title": "Automotive & Embedded Expertise",
    "tech_skills_desc_1": "Embedded C, AUTOSAR, Diagnostics (UDS), CAN, FlexRay, Ethernet, Davinci Configurator.",
    "tech_skills_desc_2": "Leadership: Led cross-functional teams and delivered complex software solutions for leading automotive OEMs.",
    
    "education_title": "Education",
    "edu_1_title": "Advanced Data Science Training",
    "edu_1_desc": "Université Paris Panthéon-Sorbonne",
    "edu_1_date": "2024",
    "edu_2_title": "Bachelor of Engineering (Instrumentation Technology)",
    "edu_2_desc": "B.V.B College of Engineering and Technology, Hubli, India",
    "edu_2_date": "2009 – 2013",
    
    "certs_title": "Certifications",
    "certs_details": "Professional Data Science Certifications",
    
    "cert_1_title": "Certified Data Scientist | DataScientest",
    "cert_1_li_1": "Intensive program (Weiterbildung) in MLOps, Deep Learning architectures (CNNs, Transformers), and Big Data.",
    "cert_1_li_2": "Focused on creating end-to-end data pipelines and deploying business-ready AI models.",
    "cert_1_li_3": "Modules included Model Interpretability and Responsible AI practices.",
    "cert_1_li_4": "",

    "languages_title": "Languages",
    "languages_details": "English (Fluent), German (B2), Telugu (Native), Kannada, Hindi",
    
    "download_button": "Download Full CV (PDF)"
  },
  de: {
    "title": "Sravani H. Venkata - Data Scientist",
    "name": "Sravani H. Venkata",
    "tagline": "Data Scientist mit 11 Jahren Erfahrung in der Automobil-Softwareentwicklung",
    "email": "E-Mail",
    "linkedin": "LinkedIn",
    "github": "GitHub",
    "phone": "Telefon",
    "location": "Standort",
    
    "summary_title": "Zusammenfassung",
    "summary_text": "ML-Ingenieurin mit 11 Jahren Automotive-Expertise und fortgeschrittener Data Science-Ausbildung an der Université Paris Panthéon-Sorbonne. Spezialisiert auf KI-Automatisierung und Echtzeit-Anomalieerkennung.",
    "summary_text_short": "ML-Ingenieurin mit 11 Jahren Automotive-Expertise und Weiterbildung an der Sorbonne. Expertin für KI-Sicherheitssysteme.",
    
    "skills_title": "Fähigkeiten",
    "skills_cat_prog": "Programmiersprachen",
    "skills_prog_lang_details": "Python (Expert), SQL, C++, Java",
    "skills_cat_ml": "Data Science & Machine Learning",
    "skills_ml_details": "LLMs, RAG, Computer Vision, Zeitreihenanalyse, Anomalieerkennung",
    "skills_cat_dl": "Deep Learning",
    "skills_dl_details": "Keras, PyTorch, TensorFlow, CNNs, Transformers",
    "skills_cat_tools": "Tools & Plattformen",
    "skills_tools_details": "Pandas, Scikit-learn, Git, Docker, AWS, Vector Databases",
    "skills_cat_other": "Embedded Systems",
    "skills_other_details": "AUTOSAR, Embedded C, IoT, Mikrocontroller, Echtzeitsysteme",
    "ds_libs_details": "Pandas, NumPy, Scikit-learn, Matplotlib, Seaborn, Plotly",
    
    "projects_title": "Projekte",
    "project_1_title": "CAN-Bus Anomalieerkennung (KI-Sicherheit)",
    "project_tech_title": "Technologien",
    "project_1_tech": "Python, Keras, LSTM Autoencoder",
    "project_methods_title": "Methoden",
    "project_1_methods": "Unüberwachtes Lernen, Echtzeitanalyse",
    "project_impact_title": "Einfluss",
    "project_1_impact": "Entwicklung eines Sicherheitssystems, das Cyberangriffe auf Fahrzeuge mit 97,6% Genauigkeit erkennt.",
    "project_1_desc": "KI-System zur Echtzeit-Erkennung von bösartigen Nachrichten im Fahrzeugnetzwerk.",
    "project_1_li_1": "<b>Methodik:</b> Einsatz von KI zur automatischen Überwachung und Kennzeichnung verdächtiger Aktivitäten.",
    "project_1_li_2": "<b>Ergebnis:</b> 98,8% Präzision bei der Identifizierung von DoS-Angriffen.",
    "project_1_li_3": "<b>Abschluss:</b> Erfolgreiche Brücke zwischen Automotive-Hardware und KI-Sicherheitsprotokollen.",
    "project_1_li_4": "",
    
    "experience_title": "Berufserfahrung",
    "experience_title_print": "Berufserfahrung (11 Jahre Automotive & KI)",
    
    "exp_1_title": "Project Lead | Montbleu Technologies GmbH",
    "exp_1_date": "Aug 2021 – Feb 2025",
    "exp_1_li_1": "Leitung von Teams zur Softwareanpassung, Steigerung der Bereitstellungsgeschwindigkeit um 25%.",
    "exp_1_li_2": "Implementierung von Multicore-Support und Hochgeschwindigkeitsprotokollen für Top-OEMs.",
    "exp_1_li_3": "Verantwortung für Projektbudgets und technische Lieferung für Kunden wie Stellantis.",
    "exp_1_li_4": "Reduzierung von Systemfehlern um 20% durch automatisierte Überwachung.",
    
    "exp_2_title": "Lead Engineer | Avin Systems GmbH, Berlin",
    "exp_2_date": "Sep 2019 – Juli 2021",
    "exp_2_li_1": "Softwarearchitektur für Mercedes-Benz Batteriemanagementsysteme (BMS).",
    "exp_2_li_2": "Sicherstellung der 100%igen AUTOSAR-Compliance.",
    "exp_2_li_3": "Mentoring von 5 Ingenieuren, Steigerung der Effizienz um 30%.",
    
    "exp_3_title": "Senior Software Engineer | KPIT Technologies, München",
    "exp_3_date": "Okt 2013 – Juni 2019",
    "exp_3_li_1": "Entwicklung von Software für BMW, Continental und ZF-TRW.",
    "exp_3_li_2": "Optimierung der Diagnoseprotokolle, Zeitersparnis beim Software-Flashing um 15%.",
    "exp_3_li_3": "Zusammenarbeit mit Hardware-Teams für nahtlose Systemintegration.",
    
    "tech_skills_title": "Automotive Expertise",
    "tech_skills_desc_1": "Embedded C, AUTOSAR, Diagnose (UDS), CAN, FlexRay, Davinci Configurator.",
    "tech_skills_desc_2": "Führung: Erfahrung in der Leitung grenzüberschreitender Teams.",
    
    "education_title": "Ausbildung",
    "edu_1_title": "Advanced Data Science Training",
    "edu_1_desc": "Université Paris Panthéon-Sorbonne",
    "edu_1_date": "2024",
    "edu_2_title": "Bachelor of Engineering",
    "edu_2_desc": "B.V.B College of Engineering, Indien",
    "edu_2_date": "2009 – 2013",
    
    "certs_title": "Zertifizierungen",
    "certs_details": "Data Science Zertifikate",
    
    "cert_1_title": "Zertifizierte Data Scientist | DataScientest",
    "cert_1_li_1": "Abschluss einer intensiven Weiterbildung mit Fokus auf End-to-End-Datenpipelines, fortgeschrittene Modellerstellung und Deployment.",
    "cert_1_li_2": "Fokus auf angewandtes maschinelles Lernen, Deep Learning (CNNs, Transformers) und Data Engineering.",
    "cert_1_li_3": "Module zu MLOps, Modellinterpretierbarkeit und verantwortungsvoller KI.",
    "cert_1_li_4": "",

    "languages_title": "Sprachen",
    "languages_details": "Deutsch (B2), Englisch (Fließend), Telugu (Muttersprache), Kannada, Hindi",
    
    "download_button": "Lebenslauf herunterladen (PDF)"
  }
};

document.addEventListener('DOMContentLoaded', () => {
  const setLanguage = (language) => {
    document.documentElement.lang = language;
    localStorage.setItem('language', language);
    document.querySelectorAll('[data-key]').forEach(element => {
      const key = element.getAttribute('data-key');
      if (translations[language] && translations[language][key]) {
        element.innerHTML = translations[language][key];
      }
    });
  };

  const languageSwitcher = document.querySelector('#language-switcher');
  const dropdownItems = document.querySelectorAll('.dropdown-item[data-lang]');

  dropdownItems.forEach(item => {
    item.addEventListener('click', (event) => {
      event.preventDefault();
      const selectedLang = item.getAttribute('data-lang');
      setLanguage(selectedLang);
    });
  });

  const savedLang = localStorage.getItem('language');
  const browserLang = navigator.language.split('-')[0];
  const currentLang = savedLang || (browserLang === 'de' ? 'de' : 'en');
  setLanguage(currentLang);

  const downloadBtn = document.getElementById('download-btn');
  if (downloadBtn) {
    const originalButtonText = translations[currentLang].download_button || 'Download Full CV (PDF)';

    downloadBtn.addEventListener('click', async () => {
      if (!window.html2canvas || !window.jspdf) {
        alert("Error: PDF libraries are not loaded. Please check index.html.");
        return;
      }

      downloadBtn.disabled = true;
      downloadBtn.innerHTML = 'Generating PDF...';

      try {
        const lang = localStorage.getItem('language') || 'en';
        const trans = translations[lang];

        const tempDiv = document.createElement('div');
        tempDiv.id = 'pdf-temp-container';
        
        tempDiv.style.position = 'fixed';
        tempDiv.style.left = '0';
        tempDiv.style.top = '0';
        tempDiv.style.zIndex = '-9999'; 
        
        tempDiv.style.width = '816px'; 
        tempDiv.style.padding = '48px 58px'; 
        tempDiv.style.backgroundColor = 'white';
        tempDiv.style.color = '#2c3e50';
        tempDiv.style.fontFamily = "Calibri, Arial, sans-serif";
        tempDiv.style.fontSize = '10pt';
        tempDiv.style.lineHeight = '1.5';
        tempDiv.style.boxSizing = 'border-box';
        
        tempDiv.innerHTML = `
<style>
  #pdf-temp-container { font-family: Calibri, Arial, sans-serif; color: #2c3e50; }
  .pdf-header { margin-bottom: 10pt; text-align: center; border-bottom: 2px solid #2980b9; padding-bottom: 6pt; }
  .pdf-header-name { font-size: 13pt; font-weight: bold; color: #1a3a52; margin: 0 0 3pt 0; }
  .pdf-header-contact { font-size: 8pt; color: #666; margin-top: 3pt; line-height: 1.3; }
  .pdf-header-contact span { display: block; margin: 1pt 0; }
  
  .pdf-section { margin-bottom: 10pt; }
  .pdf-section h2 { font-size: 10.5pt; font-weight: bold; color: #1a3a52; text-transform: uppercase; margin: 8pt 0 5pt 0; padding-bottom: 2pt; border-bottom: 1px solid #2980b9; letter-spacing: 0.05em; }
  
  .pdf-summary-text { font-size: 9pt; line-height: 1.35; margin: 0; text-align: justify; }
  
  .pdf-job { margin-bottom: 8pt; }
  .pdf-job-title { font-size: 9pt; font-weight: bold; color: #1a3a52; margin: 0 0 1pt 0; }
  .pdf-job-meta { font-size: 8pt; color: #777; margin: 0 0 3pt 0; font-style: italic; }
  .pdf-job ul { margin: 3pt 0 0 0; padding-left: 18pt; list-style: disc; }
  .pdf-job li { font-size: 8pt; line-height: 1.25; margin-bottom: 2pt; }
  
  .pdf-project-item { margin-bottom: 8pt; }
  .pdf-project-title { font-size: 9pt; font-weight: bold; color: #1a3a52; margin: 0 0 3pt 0; }
  .pdf-project-list { margin: 0; padding-left: 18pt; list-style: disc; }
  .pdf-project-list li { font-size: 8pt; line-height: 1.25; margin-bottom: 1pt; }
  
  .pdf-skill-group { margin-bottom: 6pt; }
  .pdf-skill-label { font-size: 8pt; font-weight: bold; color: #1a3a52; display: inline-block; width: 120pt; vertical-align: top; }
  .pdf-skill-content { font-size: 8pt; color: #666; display: inline-block; width: calc(100% - 125pt); line-height: 1.3; }
  
  .pdf-edu-item { margin-bottom: 5pt; }
  .pdf-edu-degree { font-size: 8pt; font-weight: bold; color: #1a3a52; margin: 0; }
  .pdf-edu-school { font-size: 8pt; margin: 0; color: #666; }
  .pdf-edu-date { font-size: 7.5pt; color: #999; margin: 0; }
  
  .pdf-cert-item { margin-bottom: 6pt; }
  .pdf-cert-category-title { font-size: 8pt; font-weight: bold; color: #1a3a52; margin-bottom: 2pt; }
  .pdf-cert-list { font-size: 8pt; margin: 0; padding-left: 18pt; list-style: disc; line-height: 1.25; }
  .pdf-cert-list li { margin-bottom: 1pt; }

  .pdf-list-item { font-size: 8pt; line-height: 1.3; color: #666; }
</style>

<div class="pdf-header">
  <div class="pdf-header-name">${trans.name}</div>
  <div class="pdf-header-contact">
    <span>${trans.email}: sravani.hvenkata@gmail.com</span>
    <span>${trans.phone}: [Insert Number] | ${trans.location}: Germany</span>
    <span>${trans.linkedin}: linkedin.com/in/sravani-hukumathi-venkata-750591110</span>
  </div>
</div>

<div class="pdf-section">
  <h2>${trans.summary_title}</h2>
  <p class="pdf-summary-text">${trans.summary_text_short}</p>
</div>

<div class="pdf-section">
  <h2>${trans.skills_title}</h2>
  <div class="pdf-skill-group"><span class="pdf-skill-label">${trans.skills_cat_ml}</span><span class="pdf-skill-content">${trans.skills_ml_details}</span></div>
  <div class="pdf-skill-group"><span class="pdf-skill-label">${trans.skills_cat_dl}</span><span class="pdf-skill-content">${trans.skills_dl_details}</span></div>
  <div class="pdf-skill-group"><span class="pdf-skill-label">${trans.skills_cat_other}</span><span class="pdf-skill-content">${trans.skills_other_details}</span></div>
  <div class="pdf-skill-group"><span class="pdf-skill-label">${trans.skills_cat_prog}</span><span class="pdf-skill-content">${trans.skills_prog_lang_details}</span></div>
</div>

<div class="pdf-section">
  <h2>${trans.projects_title}</h2>
  <div class="pdf-project-item">
    <div class="pdf-project-title">${trans.project_1_title}</div>
    <ul class="pdf-project-list">
      <li><b>${trans.project_1_desc}</b></li>
      <li>${trans.project_1_li_3}</li>
      <li>${trans.project_1_li_1}</li>
    </ul>
  </div>
</div>

<div class="pdf-section">
  <h2>${trans.experience_title_print}</h2>
  <div class="pdf-job">
    <div class="pdf-job-title">${trans.exp_1_title}</div>
    <div class="pdf-job-meta">${trans.exp_1_date}</div>
    <ul><li>${trans.exp_1_li_1}</li><li>${trans.exp_1_li_2}</li><li>${trans.exp_1_li_4}</li></ul>
  </div>
  <div class="pdf-job">
    <div class="pdf-job-title">${trans.exp_2_title}</div>
    <div class="pdf-job-meta">${trans.exp_2_date}</div>
    <ul><li>${trans.exp_2_li_1}</li><li>${trans.exp_2_li_3}</li></ul>
  </div>
  <div class="pdf-job">
    <div class="pdf-job-title">${trans.exp_3_title}</div>
    <div class="pdf-job-meta">${trans.exp_3_date}</div>
    <ul><li>${trans.exp_3_li_1}</li><li>${trans.exp_3_li_2}</li></ul>
  </div>
</div>

<div class="pdf-section">
  <h2>${trans.education_title}</h2>
  <div class="pdf-edu-item">
    <div class="pdf-edu-degree">${trans.edu_1_title}</div>
    <div class="pdf-edu-school">${trans.edu_1_desc}</div>
    <div class="pdf-edu-date">${trans.edu_1_date}</div>
  </div>
  <div class="pdf-edu-item">
    <div class="pdf-edu-degree">${trans.edu_2_title}</div>
    <div class="pdf-edu-school">${trans.edu_2_desc}</div>
    <div class="pdf-edu-date">${trans.edu_2_date}</div>
  </div>
</div>

<div class="pdf-section">
  <h2>${trans.certs_title}</h2>
  <div class="pdf-cert-item">
    <div class="pdf-cert-category-title">${trans.cert_1_title}</div>
    <ul class="pdf-cert-list">
      <li>${trans.cert_1_li_1}</li>
      <li>${trans.cert_1_li_2}</li>
    </ul>
  </div>
</div>

<div class="pdf-section">
  <h2>${trans.languages_title}</h2>
  <div class="pdf-list-item">
    ${trans.languages_details}
  </div>
</div>
        `;

        document.body.appendChild(tempDiv);

        await new Promise(resolve => setTimeout(resolve, 500)); 
        
        const PAGE_HEIGHT_PX = 1050; 
        
        const atomicBlocks = tempDiv.querySelectorAll('h2, .pdf-job, .pdf-project-item, .pdf-cert-item, .pdf-edu-item, .pdf-skill-group, p.pdf-summary-text, .pdf-list-item');
        
        let pageCount = 1;
        
        const containerTop = tempDiv.getBoundingClientRect().top;

        atomicBlocks.forEach(block => {
            const rect = block.getBoundingClientRect();
            const blockTop = rect.top - containerTop;
            const blockHeight = rect.height;
            
            if ((blockTop + blockHeight) > (PAGE_HEIGHT_PX * pageCount)) {
                const spaceRemaining = (PAGE_HEIGHT_PX * pageCount) - blockTop;
                block.style.paddingTop = (spaceRemaining + 40) + 'px'; 
                pageCount++;
            }
        });

        const canvas = await html2canvas(tempDiv, {
          scale: 1.1,
          useCORS: true,
          allowTaint: true,
          backgroundColor: 'white',
          logging: false
        });

        const { jsPDF } = window.jspdf;
        const pageWidth = 8.5;
        const pageHeight = 11;
        const margin = 0.4;
        const contentWidth = pageWidth - (margin * 2);
        
        const canvasWidth = canvas.width;
        const canvasHeight = canvas.height;
        
        const scaledImgHeight = (canvasHeight * contentWidth) / canvasWidth;
        const usablePageHeight = pageHeight - (margin * 2);
        const numPages = Math.ceil(scaledImgHeight / usablePageHeight);

        const pdf = new jsPDF({ orientation: 'p', unit: 'in', format: 'letter' });

        for (let pageNum = 0; pageNum < numPages; pageNum++) {
          if (pageNum > 0) pdf.addPage();
          
          const sourceY = (pageNum * canvasHeight * usablePageHeight) / scaledImgHeight;
          const sourceHeight = Math.min(
            canvasHeight - sourceY,
            (canvasHeight * usablePageHeight) / scaledImgHeight
          );
          
          const tempCanvas = document.createElement('canvas');
          tempCanvas.width = canvasWidth;
          tempCanvas.height = sourceHeight;
          
          const tempCtx = tempCanvas.getContext('2d');
          tempCtx.fillStyle = 'white';
          tempCtx.fillRect(0, 0, canvasWidth, sourceHeight);
          tempCtx.drawImage(canvas, 0, sourceY, canvasWidth, sourceHeight, 0, 0, canvasWidth, sourceHeight);
          
          const pageImageData = tempCanvas.toDataURL('image/png');
          const pageImageHeight = (sourceHeight * contentWidth) / canvasWidth;
          
          pdf.addImage(pageImageData, 'PNG', margin, margin, contentWidth, pageImageHeight);
        }

        pdf.save('Sravani_Venkata_CV.pdf');
        
        document.body.removeChild(tempDiv);
        downloadBtn.disabled = false;
        downloadBtn.innerHTML = originalButtonText;

      } catch (error) {
        console.error(error);
        alert('Error generating PDF: ' + error.message);
        downloadBtn.disabled = false;
        downloadBtn.innerHTML = originalButtonText;
      }
    });
  }
});
