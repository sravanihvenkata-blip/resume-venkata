const translations = {
  en: {
    "title": "Sravani H. Venkata - Data Scientist",
    "name": "Sravani H. Venkata",
    "tagline": "Aspiring Data Scientist with a background in Automotive Software Development",
    "email": "Email",
    "linkedin": "LinkedIn",
    "github": "GitHub",
    
    "summary_title": "Summary",
    "summary_text": "Experienced Engineer with 11 years in the automotive industry specializing in Embedded C and AUTOSAR. Recently completed advanced training (Weiterbildung) in Data Science and seeking opportunities to pivot into this field. Proficient in Python, machine learning, statistical analysis, and real-time anomaly detection. Proven ability to build and deploy models that solve critical business problems.",
    "summary_text_short": "Experienced Engineer with 11 years in the automotive industry specializing in Embedded C and AUTOSAR. Recently completed advanced training (Weiterbildung) in Data Science. Proficient in Python, machine learning, statistical analysis, and real-time anomaly detection.",
    
    "skills_title": "Skills",
    "skills_cat_prog": "Programming Languages",
    "skills_prog_lang_details": "Python (OOP, Unit Testing)",
    "skills_cat_ml": "Data Science & Machine Learning",
    "skills_ml_details": "Classification, Regression, Clustering, Dimensionality Reduction (PCA), Feature Engineering, Time Series Analysis, Anomaly Detection",
    "skills_cat_dl": "Deep Learning & Neural Networks",
    "skills_dl_details": "Keras, PyTorch, TensorFlow, CNNs, DNNs, Transformers, LLMs, Reinforcement Learning, Computer Vision (OpenCV)",
    "skills_cat_tools": "Tools, Platforms & Libraries",
    "skills_tools_details": "Pandas, NumPy, Scikit-learn, Matplotlib, Seaborn, Plotly, Git, GitHub, Linux Command Line, Docker, Streamlit, Virtual Machines, AWS (basics)",
    "skills_cat_other": "Other",
    "skills_other_details": "Data APIs, Web Scraping (BeautifulSoup), Graph Theory, Network Analysis, Applied Data Science (Financial Datasets)",
    "ds_libs_details": "Pandas, NumPy, Scikit-learn, Matplotlib, Seaborn, Plotly",
    
    "projects_title": "Projects",
    "project_1_title": "CAN Bus Anomaly Detection",
    "project_tech_title": "Technologies",
    "project_1_tech": "Python, Pandas, Scikit-learn, Keras, LSTM Autoencoder",
    "project_methods_title": "Methods & Techniques",
    "project_1_methods": "Exploratory Data Analysis (EDA), Feature Engineering (Shannon Entropy), Supervised vs Unsupervised Learning",
    "project_impact_title": "Impact",
    "project_1_impact": "Developed a robust anomaly detection system for Controller Area Network (CAN) bus traffic to identify malicious messages in real-time.",
    "project_1_desc": "Developed a robust anomaly detection system for CAN bus traffic to identify malicious messages in real-time.",
    "project_1_li_1": "Implemented and compared two distinct models: a supervised classification model with expert-driven feature engineering and an unsupervised LSTM Autoencoder for detecting zero-day anomalies.",
    "project_1_li_2": "Performed in-depth Exploratory Data Analysis (EDA) to identify statistical differences between normal and attack traffic, validating the feature engineering strategy.",
    "project_1_li_3": "Engineered key features like Shannon Entropy to effectively distinguish between normal, structured CAN messages and high-entropy 'Fuzzy' attacks.",
    "project_1_li_4": "Demonstrated the ability to detect various attack types, including DoS, Fuzzy, and Impersonation attacks, by analyzing CAN ID frequency, inter-arrival times, and payload characteristics.",
    
    "experience_title": "Professional Experience (Last 11 Years)",
    "experience_title_print": "Professional Experience (Last 11 Years: Automotive Embedded Systems)",
    
    "exp_1_title": "Project Lead, Montbleu Technologies GmbH, Germany",
    "exp_1_date": "Aug 2021 – Feb 2025",
    "exp_1_li_1": "Led adaptation and configuration of AUTOSAR MCAL for new automotive hardware platforms.",
    "exp_1_li_2": "Implemented multicore support, XCP over Ethernet and CAN, and customized bootloaders.",
    "exp_1_li_3": "Oversaw SBC and watchdog functionality implementation, and resolved complex system-level issues.",
    "exp_1_li_4": "Delivered high-quality solutions for OEM clients including Stellantis and Vector Informatik.",
    
    "exp_2_title": "Lead Engineer, Avin Systems GmbH, Berlin",
    "exp_2_date": "Sep 2019 – July 2021",
    "exp_2_li_1": "Managed a Battery Management System project for Mercedes-Benz, steering software architecture and application SWC development.",
    "exp_2_li_2": "Configured diagnostic stacks and base software modules (AUTOSAR-compliant).",
    "exp_2_li_3": "Mentored junior engineers, ensuring code quality through thorough reviews.",
    
    "exp_3_title": "Senior Software Engineer, KPIT Technologies GmbH, Munich",
    "exp_3_date": "Oct 2013 – June 2019",
    "exp_3_li_1": "Developed embedded automotive software for clients like Continental AG, ZF-TRW, and OEMs such as BMW.",
    "exp_3_li_2": "Specialized in diagnostics and communication protocols (FlexRay, CAN, LIN), bootloader configuration, and hardware/software integration.",
    "exp_3_li_3": "Authored detailed software designs and collaborated with hardware teams for seamless system integration.",
    
    "tech_skills_title": "Technical Skills Highlight (Embedded Systems)",
    "tech_skills_desc_1": "Extensive experience in: Embedded C, Python, diagnostics stack, CAN, FlexRay, LIN, UDS, Ethernet, MCAL software architecture, configuration tools (Davinci, AUTOSAR Builder, EB Tresos), versioning (SVN, JIRA, GitHub), and test automation (CANoe, CAPL, VectorCast, CANape).",
    "tech_skills_desc_2": "Leadership: Led cross-functional teams and delivered complex software solutions for leading automotive OEMs.",
    
    "education_title": "Education",
    "edu_1_title": "Bachelor of Engineering (Instrumentation Technology)",
    "edu_1_desc": "B.V.B College of Engineering and Technology, Hubli, India",
    "edu_1_date": "September 2009 – June 2013",
    
    "certs_title": "Certifications",
    "certs_details": "Specialized training in Data Science and Machine Learning",
    
    "cert_1_title": "Certified Data Scientist | DataScientest",
    "cert_1_li_1": "Completed intensive professional training (Weiterbildung) focusing on end-to-end data pipelines, advanced model building, and deployment strategies.",
    "cert_1_li_2": "Intensive program focused on applied machine learning, deep learning architectures (CNNs, Transformers), and production-grade data engineering pipelines.",
    "cert_1_li_3": "Included modules on MLOps, Model Interpretability, and Responsible AI practices.",
    "cert_1_li_4": "",
    
    "download_button": "Download Full CV (PDF)"
  },
  de: {
    "title": "Sravani H. Venkata - Data Scientist",
    "name": "Sravani H. Venkata",
    "tagline": "Angehende Data Scientist mit Hintergrund in Automotive Software Entwicklung",
    "email": "E-Mail",
    "linkedin": "LinkedIn",
    "github": "GitHub",
    
    "summary_title": "Zusammenfassung",
    "summary_text": "Erfahrene Ingenieurin mit 11 Jahren Erfahrung in der Automobilindustrie, spezialisiert auf Embedded C und AUTOSAR. Kürzlich absolvierte Weiterbildung im Bereich Data Science und auf der Suche nach Möglichkeiten in diesem Feld. Versiert in Python, maschinellem Lernen, statistischer Analyse und Echtzeit-Anomalieerkennung. Nachgewiesene Fähigkeit, Modelle zu erstellen und einzusetzen, die kritische Geschäftsprobleme lösen.",
    "summary_text_short": "Erfahrene Ingenieurin mit 11 Jahren Erfahrung in der Automobilindustrie. Kürzlich absolvierte Weiterbildung im Bereich Data Science. Versiert in Python, maschinellem Lernen, statistischer Analyse und Echtzeit-Anomalieerkennung.",
    
    "skills_title": "Fähigkeiten",
    "skills_cat_prog": "Programmiersprachen",
    "skills_prog_lang_details": "Python (OOP, Unit Testing)",
    "skills_cat_ml": "Data Science & Machine Learning",
    "skills_ml_details": "Klassifikation, Regression, Clustering, Dimensionsreduktion (PCA), Feature Engineering, Zeitreihenanalyse, Anomalieerkennung",
    "skills_cat_dl": "Deep Learning & Neuronale Netze",
    "skills_dl_details": "Keras, PyTorch, TensorFlow, CNNs, DNNs, Transformers, LLMs, Reinforcement Learning, Computer Vision (OpenCV)",
    "skills_cat_tools": "Tools & Plattformen",
    "skills_tools_details": "Pandas, NumPy, Scikit-learn, Matplotlib, Seaborn, Plotly, Git, GitHub, Linux-Kommandozeile, Docker, Streamlit, Virtuelle Maschinen, AWS (Grundlagen)",
    "skills_cat_other": "Sonstiges",
    "skills_other_details": "Daten-APIs, Web Scraping (BeautifulSoup), Graphentheorie, Netzwerkanalyse, Angewandte Data Science (Finanzdatensätze)",
    "ds_libs_details": "Pandas, NumPy, Scikit-learn, Matplotlib, Seaborn, Plotly",
    
    "projects_title": "Projekte",
    "project_1_title": "CAN-Bus-Anomalieerkennung",
    "project_tech_title": "Technologien",
    "project_1_tech": "Python, Pandas, Scikit-learn, Keras, LSTM Autoencoder",
    "project_methods_title": "Methoden & Techniken",
    "project_1_methods": "Explorative Datenanalyse (EDA), Feature Engineering (Shannon-Entropie), Überwachtes vs. Unüberwachtes Lernen",
    "project_impact_title": "Einfluss",
    "project_1_impact": "Entwicklung eines robusten Anomalieerkennungssystems für CAN-Bus-Verkehr zur Echtzeit-Identifizierung bösartiger Nachrichten.",
    "project_1_desc": "Entwicklung eines robusten Anomalieerkennungssystems für CAN-Bus-Verkehr zur Echtzeit-Identifizierung bösartiger Nachrichten.",
    "project_1_li_1": "Implementierung und Vergleich zweier unterschiedlicher Modelle: ein überwachtes Klassifikationsmodell mit expertengesteuertem Feature Engineering und ein unüberwachter LSTM-Autoencoder.",
    "project_1_li_2": "Durchführung einer tiefgehenden explorativen Datenanalyse (EDA) zur Identifizierung statistischer Unterschiede zwischen normalem und Angriffsverkehr.",
    "project_1_li_3": "Entwicklung von Schlüsselmerkmalen wie Shannon-Entropie zur effektiven Unterscheidung zwischen normalen CAN-Nachrichten und Fuzzy-Angriffen.",
    "project_1_li_4": "Erfolgreicher Nachweis verschiedener Angriffstypen (DoS, Fuzzy, Impersonation) durch Analyse der CAN-ID-Häufigkeit und Payload-Charakteristika.",
    
    "experience_title": "Berufserfahrung (Letzte 11 Jahre)",
    "experience_title_print": "Berufserfahrung (Letzte 11 Jahre: Automotive Embedded Systems)",
    
    "exp_1_title": "Project Lead, Montbleu Technologies GmbH, Deutschland",
    "exp_1_date": "Aug 2021 – Feb 2025",
    "exp_1_li_1": "Leitung der Anpassung und Konfiguration von AUTOSAR MCAL für neue Automobil-Hardwareplattformen.",
    "exp_1_li_2": "Implementierung von Multicore-Support, XCP über Ethernet/CAN und kundenspezifischen Bootloadern.",
    "exp_1_li_3": "Überwachung der SBC- und Watchdog-Implementierung sowie Lösung komplexer Systemprobleme.",
    "exp_1_li_4": "Lieferung hochwertiger Lösungen für OEM-Kunden wie Stellantis und Vector Informatik.",
    
    "exp_2_title": "Lead Engineer, Avin Systems GmbH, Berlin",
    "exp_2_date": "Sep 2019 – Juli 2021",
    "exp_2_li_1": "Leitung eines Batteriemanagementsystem-Projekts für Mercedes-Benz (Softwarearchitektur und SWC-Entwicklung).",
    "exp_2_li_2": "Konfiguration von Diagnose-Stacks und Basis-Softwaremodulen (AUTOSAR-konform).",
    "exp_2_li_3": "Mentoring von Junior-Ingenieuren und Sicherstellung der Codequalität durch Reviews.",
    
    "exp_3_title": "Senior Software Engineer, KPIT Technologies GmbH, München",
    "exp_3_date": "Okt 2013 – Juni 2019",
    "exp_3_li_1": "Entwicklung von Embedded-Software für Kunden wie Continental AG, ZF-TRW und BMW.",
    "exp_3_li_2": "Spezialisierung auf Diagnose und Kommunikationsprotokolle (FlexRay, CAN, LIN) sowie Hardware-/Software-Integration.",
    "exp_3_li_3": "Erstellung detaillierter Software-Designs und Zusammenarbeit mit Hardware-Teams.",
    
    "tech_skills_title": "Technische Fähigkeiten (Embedded Systems)",
    "tech_skills_desc_1": "Umfangreiche Erfahrung in: Embedded C, Python, Diagnose-Stack, CAN, FlexRay, LIN, UDS, Ethernet, MCAL-Architektur, Konfigurationstools (Davinci, AUTOSAR Builder, EB Tresos) und Testautomatisierung (CANoe, VectorCast).",
    "tech_skills_desc_2": "Führung: Leitung funktionsübergreifender Teams und Lieferung komplexer Softwarelösungen.",
    
    "education_title": "Ausbildung",
    "edu_1_title": "Bachelor of Engineering (Instrumentation Technology)",
    "edu_1_desc": "B.V.B College of Engineering and Technology, Hubli, Indien",
    "edu_1_date": "September 2009 – Juni 2013",
    
    "certs_title": "Zertifizierungen",
    "certs_details": "Spezialisierte Ausbildung in Data Science",
    
    "cert_1_title": "Zertifizierte Data Scientist | DataScientest",
    "cert_1_li_1": "Abschluss einer intensiven Weiterbildung mit Fokus auf End-to-End-Datenpipelines, fortgeschrittene Modellerstellung und Deployment.",
    "cert_1_li_2": "Intensivprogramm zu angewandtem maschinellen Lernen, Deep Learning (CNNs, Transformers) und Data Engineering.",
    "cert_1_li_3": "Module zu MLOps, Modellinterpretierbarkeit und verantwortungsvoller KI.",
    "cert_1_li_4": "",
    
    "download_button": "Lebenslauf herunterladen (PDF)"
  }
};

document.addEventListener('DOMContentLoaded', () => {
  // --- Language Switching Logic ---
  const setLanguage = (language) => {
    document.documentElement.lang = language;
    localStorage.setItem('language', language);
    document.querySelectorAll('[data-key]').forEach(element => {
      const key = element.getAttribute('data-key');
      if (translations[language] && translations[language][key]) {
        element.innerHTML = translations[language][key];
      }
    });
  };

  const languageSwitcher = document.querySelector('#language-switcher');
  const dropdownItems = document.querySelectorAll('.dropdown-item[data-lang]');

  dropdownItems.forEach(item => {
    item.addEventListener('click', (event) => {
      event.preventDefault();
      const selectedLang = item.getAttribute('data-lang');
      setLanguage(selectedLang);
    });
  });

  const savedLang = localStorage.getItem('language');
  const browserLang = navigator.language.split('-')[0];
  const currentLang = savedLang || (browserLang === 'de' ? 'de' : 'en');
  setLanguage(currentLang);


  // --- PDF Generation Logic with Proper Page Breaking ---
  const downloadBtn = document.getElementById('download-btn');
  if (downloadBtn) {
    const originalButtonText = translations[currentLang].download_button || 'Download Full CV (PDF)';

    downloadBtn.addEventListener('click', async () => {
      downloadBtn.disabled = true;
      downloadBtn.innerHTML = 'Generating PDF...';

      try {
        const lang = localStorage.getItem('language') || 'en';
        const trans = translations[lang];

        // Create a professional PDF layout container
        const tempDiv = document.createElement('div');
        tempDiv.id = 'pdf-temp-container';
        tempDiv.style.position = 'absolute';
        tempDiv.style.top = '-100vh';
        tempDiv.style.left = '0';
        tempDiv.style.width = '8.5in';
        tempDiv.style.padding = '0.5in 0.6in';
        tempDiv.style.backgroundColor = 'white';
        tempDiv.style.color = '#2c3e50';
        tempDiv.style.fontFamily = "Calibri, Arial, sans-serif";
        tempDiv.style.fontSize = '10pt';
        tempDiv.style.lineHeight = '1.5';
        tempDiv.style.boxSizing = 'border-box';
        tempDiv.style.minHeight = '11in';

        tempDiv.innerHTML = `
<style>
  #pdf-temp-container { 
    font-family: Calibri, Arial, sans-serif; 
    color: #2c3e50;
    width: 8.5in;
    margin: 0;
    padding: 0.5in 0.6in;
  }
  
  /* HEADER */
  .pdf-header { 
    margin-bottom: 10pt; 
    text-align: center; 
    border-bottom: 2px solid #2980b9;
    padding-bottom: 6pt;
  }
  .pdf-header-name { 
    font-size: 13pt; 
    font-weight: bold; 
    color: #1a3a52; 
    margin: 0 0 3pt 0;
  }
  .pdf-header-contact { 
    font-size: 8pt; 
    color: #666;
    margin-top: 3pt;
    line-height: 1.3;
  }
  .pdf-header-contact span { 
    display: block; 
    margin: 1pt 0;
  }
  
  /* SECTIONS */
  .pdf-section { 
    margin-bottom: 10pt; 
    page-break-inside: avoid;
  }
  .pdf-section:last-child { 
    margin-bottom: 4pt; 
  }
  
  .pdf-section h2 { 
    font-size: 10.5pt; 
    font-weight: bold; 
    color: #1a3a52; 
    text-transform: uppercase;
    margin: 8pt 0 5pt 0;
    padding-bottom: 2pt;
    border-bottom: 1px solid #2980b9;
    letter-spacing: 0.05em;
    page-break-after: avoid;
  }
  
  /* SUMMARY */
  .pdf-summary-text { 
    font-size: 9pt; 
    line-height: 1.35; 
    margin: 0;
    text-align: justify;
    page-break-inside: avoid;
  }
  
  /* EXPERIENCE & JOBS */
  .pdf-job { 
    margin-bottom: 8pt; 
    page-break-inside: avoid;
  }
  .pdf-job-title { 
    font-size: 9pt; 
    font-weight: bold; 
    color: #1a3a52; 
    margin: 0 0 1pt 0;
  }
  .pdf-job-meta { 
    font-size: 8pt; 
    color: #777; 
    margin: 0 0 3pt 0;
    font-style: italic;
  }
  .pdf-job ul { 
    margin: 3pt 0 0 0; 
    padding-left: 18pt; 
    list-style: disc;
  }
  .pdf-job li { 
    font-size: 8pt; 
    line-height: 1.25; 
    margin-bottom: 2pt;
  }
  
  /* PROJECTS */
  .pdf-project-item { 
    margin-bottom: 8pt; 
    page-break-inside: avoid;
  }
  .pdf-project-title { 
    font-size: 9pt; 
    font-weight: bold; 
    color: #1a3a52; 
    margin: 0 0 3pt 0;
  }
  .pdf-project-list { 
    margin: 0; 
    padding-left: 18pt; 
    list-style: disc;
  }
  .pdf-project-list li {
    font-size: 8pt;
    line-height: 1.25;
    margin-bottom: 1pt;
  }
  
  /* SKILLS & CATEGORIES */
  .pdf-skill-group { 
    margin-bottom: 6pt; 
    page-break-inside: avoid;
  }
  .pdf-skill-label {
    font-size: 8pt;
    font-weight: bold;
    color: #1a3a52;
    display: inline-block;
    width: 120pt;
    vertical-align: top;
  }
  .pdf-skill-content {
    font-size: 8pt;
    color: #666;
    display: inline-block;
    width: calc(100% - 125pt);
    line-height: 1.3;
  }
  
  /* EDUCATION */
  .pdf-edu-item { 
    margin-bottom: 5pt; 
    page-break-inside: avoid;
  }
  .pdf-edu-degree { 
    font-size: 8pt; 
    font-weight: bold; 
    color: #1a3a52; 
    margin: 0;
  }
  .pdf-edu-school { 
    font-size: 8pt; 
    margin: 0;
    color: #666;
  }
  .pdf-edu-date { 
    font-size: 7.5pt; 
    color: #999;
    margin: 0;
  }
  
  /* CERTIFICATIONS */
  .pdf-cert-item { 
    margin-bottom: 6pt; 
    page-break-inside: avoid;
  }
  .pdf-cert-category-title { 
    font-size: 8pt; 
    font-weight: bold; 
    color: #1a3a52;
    margin-bottom: 2pt;
  }
  .pdf-cert-list {
    font-size: 8pt;
    margin: 0;
    padding-left: 18pt;
    list-style: disc;
    line-height: 1.25;
  }
  .pdf-cert-list li {
    margin-bottom: 1pt;
  }
  
  /* PAGE BREAK SUPPORT */
  @media print {
    .pdf-section { page-break-inside: avoid; }
    .pdf-job { page-break-inside: avoid; }
    .pdf-project-item { page-break-inside: avoid; }
    .pdf-cert-item { page-break-inside: avoid; }
  }
</style>

<div class="pdf-header">
  <div class="pdf-header-name">${trans.name}</div>
  <div class="pdf-header-contact">
    <span>${trans.email}: sravani.hvenkata@gmail.com</span>
    <span>${trans.linkedin}: linkedin.com/in/sravani-hukumathi-venkata-750591110</span>
  </div>
</div>

<div class="pdf-section">
  <h2>${trans.summary_title}</h2>
  <p class="pdf-summary-text">${trans.summary_text_short}</p>
</div>

<div class="pdf-section">
  <h2>${trans.skills_title}</h2>
  
  <div class="pdf-skill-group">
    <span class="pdf-skill-label">${trans.skills_cat_prog}</span>
    <span class="pdf-skill-content">${trans.skills_prog_lang_details}</span>
  </div>
  
  <div class="pdf-skill-group">
    <span class="pdf-skill-label">${trans.skills_cat_ml}</span>
    <span class="pdf-skill-content">${trans.skills_ml_details}</span>
  </div>
  
  <div class="pdf-skill-group">
    <span class="pdf-skill-label">${trans.skills_cat_dl}</span>
    <span class="pdf-skill-content">${trans.skills_dl_details}</span>
  </div>
  
  <div class="pdf-skill-group">
    <span class="pdf-skill-label">${trans.skills_cat_tools}</span>
    <span class="pdf-skill-content">${trans.skills_tools_details}</span>
  </div>
  
  <div class="pdf-skill-group">
    <span class="pdf-skill-label">${trans.skills_cat_other}</span>
    <span class="pdf-skill-content">${trans.skills_other_details}</span>
  </div>
</div>

<div class="pdf-section">
  <h2>${trans.projects_title}</h2>
  
  <div class="pdf-project-item">
    <div class="pdf-project-title">${trans.project_1_title}</div>
    <ul class="pdf-project-list">
      <li><b>${trans.project_1_desc}</b></li>
      <li>${trans.project_1_li_1}</li>
      <li>${trans.project_1_li_2}</li>
      <li>${trans.project_1_li_3}</li>
      <li>${trans.project_1_li_4}</li>
    </ul>
  </div>
</div>

<div class="pdf-section">
  <h2>${trans.experience_title_print}</h2>
  
  <div class="pdf-job">
    <div class="pdf-job-title">${trans.exp_1_title}</div>
    <div class="pdf-job-meta">${trans.exp_1_date}</div>
    <ul>
      <li>${trans.exp_1_li_1}</li>
      <li>${trans.exp_1_li_2}</li>
      <li>${trans.exp_1_li_3}</li>
      <li>${trans.exp_1_li_4}</li>
    </ul>
  </div>

  <div class="pdf-job">
    <div class="pdf-job-title">${trans.exp_2_title}</div>
    <div class="pdf-job-meta">${trans.exp_2_date}</div>
    <ul>
      <li>${trans.exp_2_li_1}</li>
      <li>${trans.exp_2_li_2}</li>
      <li>${trans.exp_2_li_3}</li>
    </ul>
  </div>

  <div class="pdf-job">
    <div class="pdf-job-title">${trans.exp_3_title}</div>
    <div class="pdf-job-meta">${trans.exp_3_date}</div>
    <ul>
      <li>${trans.exp_3_li_1}</li>
      <li>${trans.exp_3_li_2}</li>
      <li>${trans.exp_3_li_3}</li>
    </ul>
  </div>
</div>

<div class="pdf-section">
  <h2>${trans.education_title}</h2>
  
  <div class="pdf-edu-item">
    <div class="pdf-edu-degree">${trans.edu_1_title}</div>
    <div class="pdf-edu-school">${trans.edu_1_desc}</div>
    <div class="pdf-edu-date">${trans.edu_1_date}</div>
  </div>
</div>

<div class="pdf-section">
  <h2>${trans.certs_title}</h2>
  
  <div class="pdf-cert-item">
    <div class="pdf-cert-category-title">${trans.cert_1_title}</div>
    <ul class="pdf-cert-list">
      <li>${trans.cert_1_li_1}</li>
      <li>${trans.cert_1_li_2}</li>
      <li>${trans.cert_1_li_3}</li>
    </ul>
  </div>
</div>
        `;

        document.body.appendChild(tempDiv);

        // Wait for rendering
        await new Promise(resolve => setTimeout(resolve, 1000));

        console.log('Capturing ATS-friendly PDF layout');

        // Capture with html2canvas
        const canvas = await html2canvas(tempDiv, {
          scale: 2,
          useCORS: true,
          allowTaint: true,
          backgroundColor: 'white',
          logging: false,
          proxy: null,
          removeContainer: false,
          windowHeight: tempDiv.scrollHeight,
          imageTimeout: 0
        });

        console.log('Canvas created:', canvas.width, 'x', canvas.height);

        // Generate PDF with proper page management
        const { jsPDF } = window.jspdf;
        
        const pageWidth = 8.5;
        const pageHeight = 11;
        const margin = 0.4;
        const contentWidth = pageWidth - (margin * 2);
        
        // Get canvas dimensions
        const imgData = canvas.toDataURL('image/png');
        const canvasWidth = canvas.width;
        const canvasHeight = canvas.height;
        
        // Calculate scaled image height
        const scaledImgHeight = (canvasHeight * contentWidth) / canvasWidth;
        const usablePageHeight = pageHeight - (margin * 2);
        const numPages = Math.ceil(scaledImgHeight / usablePageHeight);
        
        console.log('Image will be', scaledImgHeight, 'inches tall');
        console.log('Pages needed:', numPages);

        // Create PDF
        const pdf = new jsPDF({
          orientation: 'p',
          unit: 'in',
          format: 'letter'
        });

        // Add image pages
        for (let pageNum = 0; pageNum < numPages; pageNum++) {
          if (pageNum > 0) {
            pdf.addPage();
          }
          
          // Calculate which portion of the image to display on this page
          const sourceY = (pageNum * canvasHeight * usablePageHeight) / scaledImgHeight;
          const sourceHeight = Math.min(
            canvasHeight - sourceY,
            (canvasHeight * usablePageHeight) / scaledImgHeight
          );
          
          // Create temporary canvas with this page's content
          const tempCanvas = document.createElement('canvas');
          tempCanvas.width = canvasWidth;
          tempCanvas.height = sourceHeight;
          
          const tempCtx = tempCanvas.getContext('2d');
          tempCtx.fillStyle = 'white';
          tempCtx.fillRect(0, 0, canvasWidth, sourceHeight);
          tempCtx.drawImage(
            canvas,
            0, sourceY,
            canvasWidth, sourceHeight,
            0, 0,
            canvasWidth, sourceHeight
          );
          
          // Convert to image and add to PDF
          const pageImageData = tempCanvas.toDataURL('image/png');
          const pageImageHeight = (sourceHeight * contentWidth) / canvasWidth;
          
          pdf.addImage(
            pageImageData,
            'PNG',
            margin,
            margin,
            contentWidth,
            pageImageHeight
          );
        }

        // Save PDF
        pdf.save('Sravani_Venkata_CV.pdf');

        console.log('PDF saved successfully');

        // Cleanup
        document.body.removeChild(tempDiv);
        downloadBtn.disabled = false;
        downloadBtn.innerHTML = originalButtonText;

      } catch (error) {
        console.error('Error during PDF generation:', error);
        alert('Error: ' + error.message);
        downloadBtn.disabled = false;
        downloadBtn.innerHTML = originalButtonText;
      }
    });
  }
});
